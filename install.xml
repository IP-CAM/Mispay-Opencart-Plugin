<?xml version="1.0" encoding="UTF-8"?>
<modification>
    <name><![CDATA[MISPay Payment Gateway]]></name>
    <version><![CDATA[1.0.2]]></version>
    <code><![CDATA[Barion Payment Method]]></code>
    <author><![CDATA[MISPay]]></author>
    <link><![CDATA[https://mispay.co]]></link>
   
    <file path="catalog/controller/checkout/checkout.php">
        <operation>
            <search><![CDATA[$data['footer'] = $this->load->controller('common/footer');]]></search>
            <add position="before"><![CDATA[
        // Load MISPay widget if enabled
        if ($this->config->get('payment_mispay_enable_widget')) {
            $data['mispay_widget'] = $this->load->controller('extension/payment/mispay/getWidget');
        }
            ]]></add>
        </operation>
    </file>
    
    <file path="catalog/view/theme/default/template/checkout/checkout.twig">
        <operation>
            <search><![CDATA[{{ footer }}]]></search>
            <add position="before"><![CDATA[
    {% if mispay_widget %}
    <div class="mispay-widget-container">
        {{ mispay_widget }}
    </div>
    {% endif %}
            ]]></add>
        </operation>
    </file>
    
    <file path="catalog/controller/product/product.php">
        <operation>
            <search><![CDATA[$data['footer'] = $this->load->controller('common/footer');]]></search>
            <add position="before"><![CDATA[
        // Load MISPay widget if enabled
        if ($this->config->get('payment_mispay_enable_widget')) {
            $data['mispay_widget'] = $this->load->controller('extension/payment/mispay/getProductWidget', array('product_id' => $product_id));
        }
            ]]></add>
        </operation>
    </file>
    
    <file path="catalog/view/theme/default/template/product/product.twig">
        <operation>
            <search><![CDATA[{{ footer }}]]></search>
            <add position="before"><![CDATA[
    {% if mispay_widget %}
    <div class="mispay-widget-container">
        {{ mispay_widget }}
    </div>
    {% endif %}
            ]]></add>
        </operation>
    </file>
</modification> 
